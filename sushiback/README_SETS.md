# Функциональность сетов для приложения суши

## Описание

Добавлена возможность работы с сетами (комплектами роллов) в приложение для учета заказов суши. Теперь повара могут:

- Просматривать все доступные сеты с детальной информацией
- Добавлять сеты в заказы
- Отслеживать статистику по сете в отчетах

## Установка и настройка

### 1. Заполнение данных о сетах

Запустите скрипт для заполнения данных:

```bash
python fill_sets_data.py
```

Этот скрипт создаст:
- `sets.xlsx` - информация о сетах (цены, себестоимость, прибыль)
- `set_composition.xlsx` - состав каждого сета

### 2. Перезапуск приложения

После заполнения данных перезапустите приложение:

```bash
python app.py
```

## Использование

### Просмотр сетов

1. Войдите в систему как шеф-повар или сотрудник
2. В навигации появится вкладка "Сеты"
3. На странице сетов отображаются все доступные сеты в виде карточек

### Информация о сете

Каждая карточка сета содержит:
- **Название сета**
- **Состав** - список роллов, входящих в сет
- **Себестоимость** - затраты на производство
- **Розничная цена** - цена при покупке по отдельности
- **Цена сета** - специальная цена за весь сет
- **Скидка** - процент экономии от розничной цены
- **Валовая прибыль** - разница между ценой сета и себестоимостью
- **Маржа** - процент прибыли

### Добавление сета в заказ

1. На странице сетов нажмите кнопку "Добавить в заказ"
2. В модальном окне укажите количество и комментарий
3. Нажмите "Добавить в заказ"
4. Сет будет добавлен в заказы со статусом "Принят"

### Управление заказами сетов

- Сеты отображаются в списке заказов с пометкой "Сет"
- Для сетов показывается полный состав роллов
- Статусы заказов работают так же, как для обычных роллов
- При отметке заказа как "Сделан" учитывается расход ингредиентов всех роллов в сете

### Отчеты

В разделе "Отчеты" теперь отображается:
- Общий доход от всех заказов
- Детализация по типам заказов (роллы vs сеты)
- Количество заказов каждого типа
- Доходы по каждому типу

## Структура данных

### Таблица сетов (sets.xlsx)
- `id` - уникальный идентификатор
- `name` - название сета
- `cost_price` - себестоимость
- `retail_price` - розничная цена по отдельности
- `set_price` - цена сета
- `discount_percent` - процент скидки
- `gross_profit` - валовая прибыль
- `margin_percent` - маржа

### Состав сетов (set_composition.xlsx)
- `set_id` - ID сета
- `roll_id` - ID ролла
- `roll_name` - название ролла

### Обновленная таблица заказов (orders.xlsx)
Добавлены колонки:
- `set_id` - ID сета (если заказ сета)
- `order_type` - тип заказа ('roll' или 'set')

## Доступные сеты

1. **Классический** - Калифорния, Филадельфия, Темпура Чикен маки, Саке маки
2. **Бюджетный** - Овощной ролл, Мини ролл огурец, Запеченная Маки курица, Саке маки
3. **Темпура** - Лосось темпура, Курица темпура, Угорь темпура
4. **Запечённый** - Запечённый магистр, Запечённая фила, Унаги запечённый
5. **Фила Премиум** - Фила спешл, Копчёная фила, Фила с угрём, Филадельфия
6. **Хит Комбо** - Филадельфия, Калифорния, Запечённый магистр, Запечённая фила, Лосось темпура
7. **Party Mix** - 8 роллов (Калифорния, Филадельфия, Лосось темпура, Угорь темпура, Сладкий ролл, Овощной ролл, Чедр ролл, Острый лосось)
8. **Для компании** - 7 роллов (Курица темпура, Филадельфия, Калифорния, Ролл нежный, Запечённый магистр, Запеченная Маки курица, Ролл Чикаго)
9. **Anteyko** - 9 роллов
10. **Набор на двоих** - 3 ролла
11. **Набор на троих** - 4 ролла
12. **Chill на Филармонии** - 5 роллов

## Безопасность

- Доступ к сете имеют только шеф-повара и сотрудники
- При добавлении сета в заказ автоматически проверяется наличие ингредиентов
- Все операции логируются в аудит-лог

## Технические детали

- Сеты реализованы как отдельный тип заказа
- Автоматическая миграция существующих данных
- Совместимость с существующей системой заказов
- Оптимизированная обработка составов сетов
