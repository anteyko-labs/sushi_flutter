#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ü–µ–Ω–∞–º–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ
"""

def fix_cart_price_issue():
    print("üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –¶–ï–ù–ê–ú–ò –í –ö–û–†–ó–ò–ù–ï")
    print("=" * 50)
    
    # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
    with open('app_sqlite.py', 'r', encoding='utf-8') as f:
        content = f.read()
    
    # –ü—Ä–æ–±–ª–µ–º–∞: API –∫–æ—Ä–∑–∏–Ω—ã –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤
    # –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—ã –≤ –æ—Ç–≤–µ—Ç API –∫–æ—Ä–∑–∏–Ω—ã
    
    # –ò—â–µ–º –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã
    lines = content.split('\n')
    cart_start = -1
    
    for i, line in enumerate(lines):
        if '/api/cart' in line and 'GET' in line:
            cart_start = i
            break
    
    if cart_start != -1:
        print(f"‚úÖ –ù–∞–π–¥–µ–Ω –∫–æ–¥ –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ —Å—Ç—Ä–æ–∫–µ {cart_start + 1}")
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–¥ –∫–æ—Ä–∑–∏–Ω—ã
        for i in range(cart_start, min(len(lines), cart_start + 20)):
            print(f"   {i+1:3}: {lines[i]}")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω –∫–æ–¥ –∫–æ—Ä–∑–∏–Ω—ã")
    
    print("\nüìã –ü–†–û–ë–õ–ï–ú–´:")
    print("1. API –∫–æ—Ä–∑–∏–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ item_type, item_id, quantity")
    print("2. –ù–µ—Ç —Ü–µ–Ω —Ç–æ–≤–∞—Ä–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ")
    print("3. Flutter –Ω–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–µ–Ω—ã")
    print("4. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—ã –≤ –æ—Ç–≤–µ—Ç API –∫–æ—Ä–∑–∏–Ω—ã")

if __name__ == "__main__":
    fix_cart_price_issue()

